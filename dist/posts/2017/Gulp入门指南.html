<!doctype html><html class="" data-reactroot=""><head><script src="/assets/hm.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="description" content="前端工程师，爱折腾，擅长 JavaScript，欢迎关注我的公众号「自然醒的笔记本」"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" property="og:title" content="Gulp入门指南 · 自然醒的博客"/><meta data-react-helmet="true" property="og:description" content="前端工程师，爱折腾，擅长 JavaScript，欢迎关注我的公众号「自然醒的笔记本」"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>
<title data-react-helmet="true">Gulp入门指南 · 自然醒的博客</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><a class="czs-menu-l show_on_mobile aside_button_open" href="#" style="background-image:url(&quot;/assets/czs-menu-l.svg&quot;)"></a><a class="show_on_mobile aside_button_text" href="/">自然醒的博客</a><aside class="hide_on_mobile"><div class="aside_card"><a class="czs-menu-l show_on_mobile aside_button_close" href="#" style="background-image:url(&quot;/assets/czs-close-l.svg&quot;)"></a><h1><a href="/">自然醒的博客</a></h1><p class="description">前端工程师，爱折腾，擅长 JavaScript，欢迎关注我的公众号「自然醒的笔记本」</p><ul class="social list_style_none"><li class="flex_center"><a class="czs-github-logo" href="https://github.com/Shenfq" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="flex_center"><a class="czs-message-l" href="mailto:shenfq95@foxmail.com" target="_blank" style="background-image:url(&quot;/assets/czs-message-l.svg&quot;)"></a></li><li style="flex-grow:1"></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul><nav><ul class="menu list_style_none"><li><a class="flex_center" href="/"><span class="czs-home-l" style="background-image:url(&quot;/assets/czs-home-l.svg&quot;)"></span>首页</a></li><li><a class="flex_center" href="/categories/"><span class="czs-category-l" style="background-image:url(&quot;/assets/czs-category-l.svg&quot;)"></span>分类</a></li><li><a class="flex_center" href="/tags/"><span class="czs-tag-l" style="background-image:url(&quot;/assets/czs-tag-l.svg&quot;)"></span>标签</a></li><li><a class="flex_center" href="/about/"><span class="czs-about-l" style="background-image:url(&quot;/assets/czs-about-l.svg&quot;)"></span>关于</a></li><li><a class="flex_center" href="/archives/"><span class="czs-box-l" style="background-image:url(&quot;/assets/czs-box-l.svg&quot;)"></span>归档</a></li><li><a class="flex_center" href="/links/index.html"><span class="czs-link-l" style="background-image:url(&quot;/assets/czs-link-l.svg&quot;)"></span>友情链接</a></li></ul></nav></div><nav class="toc"><ol><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E8%BF%99%E7%AF%87%E5%8D%9A%E5%AE%A2">为什么要写这篇博客？</a></li><li><a href="#%E4%B8%80%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">一、准备工作</a></li><li><a href="#%E4%BA%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8gulp">二、为什么要使用gulp</a></li><li><a href="#%E4%B8%89%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%8A%BD%E8%B1%A1%E8%87%AA%E5%B7%B1%E7%9A%84gulp%E4%BB%BB%E5%8A%A1">三、一步步抽象自己的gulp任务</a><ol><li><a href="#%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9%E4%BB%BB%E5%8A%A1">代码压缩任务</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E7%AE%A1%E9%81%93%E6%B5%81%E7%9B%91%E5%90%AC-error">使用管道流监听 error</a></li><li><a href="#%E6%8F%90%E9%AB%98watch%E7%9A%84%E6%95%88%E7%8E%87">提高watch的效率</a></li><li><a href="#%E5%BC%95%E5%85%A5gulp-util%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%9B%B4%E8%BD%BB%E6%9D%BE">引入gulp-util插件，配置更轻松</a></li></ol></li></ol></nav></aside><section class="main"><h1>Gulp入门指南</h1><div class="main_post_meta"><time dateTime="2017/05/24">2017-05-24</time> · <!-- -->shenfq</div><article><h2 id="%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E8%BF%99%E7%AF%87%E5%8D%9A%E5%AE%A2">为什么要写这篇博客？<a class="anchor" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99%E8%BF%99%E7%AF%87%E5%8D%9A%E5%AE%A2">§</a></h2>
<p>谈起为什么，其实就是想总结下这段时间做的工作。之前一直在用gulp，但是一直没有自己的思考，下了两个插件就开始了。这一次为公司的项目配置了一次gulp，尽可能多的考虑到了一些情况，比如本地开发调试时生成map映射，上线时清除到已生成的map映射。</p>
<blockquote>
<p>在构建这个项目时，参考到了<a href="https://github.com/nimojs/gulp-book/blob/master/chapter7.md">这篇文章</a></p>
</blockquote>
<h2 id="%E4%B8%80%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">一、准备工作<a class="anchor" href="#%E4%B8%80%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">§</a></h2>
<ol>
<li>
<p>安装<a href="https://nodejs.org/en/">node</a>；</p>
</li>
<li>
<p>使用npm安装<a href="http://www.gulpjs.com.cn/docs/">gulp</a> ；</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --global gulp   //全局安装gulp
<span class="token function">npm</span> <span class="token function">install</span> --save-dev gulp  //在项目目录下安装gulp，作为项目的开发依赖

gulp -v  //使用该命令查看gulp是否安装成功
</code></pre>
</li>
<li>
<p>项目目录下创建gulpfile.js。</p>
</li>
</ol>
<h2 id="%E4%BA%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8gulp">二、为什么要使用gulp<a class="anchor" href="#%E4%BA%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8gulp">§</a></h2>
<p>首先gulp可以解放双手，以前需要频繁Ctrl+C、Ctrl+V的操作，现在只需要在命令行输入一个命令就可以搞定。只要我们配置好gulpfile.js文件后，一个命令就能将当前项目下所有的js与css进行压缩，并且实时监听修改的文件进行操作。这还得感谢node，让js具有了文件读写的能力，之前只能在浏览器运行的脚本，现在可以在本地跑起来，前端人员也能开心的写服务器了。</p>
<h2 id="%E4%B8%89%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%8A%BD%E8%B1%A1%E8%87%AA%E5%B7%B1%E7%9A%84gulp%E4%BB%BB%E5%8A%A1">三、一步步抽象自己的gulp任务<a class="anchor" href="#%E4%B8%89%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%8A%BD%E8%B1%A1%E8%87%AA%E5%B7%B1%E7%9A%84gulp%E4%BB%BB%E5%8A%A1">§</a></h2>
<h3 id="%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9%E4%BB%BB%E5%8A%A1">代码压缩任务<a class="anchor" href="#%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9%E4%BB%BB%E5%8A%A1">§</a></h3>
<p>先编写一个简单的压缩js的任务，并生成对应的map映射，方便在浏览器中调试。</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sourcemaps <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-sourcemaps'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-uglify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token method function property-access">task</span><span class="token punctuation">(</span><span class="token string">'uglifyjs'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> gulp<span class="token punctuation">.</span><span class="token method function property-access">src</span><span class="token punctuation">(</span><span class="token string">'./resource/js/**/*.js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            mangle<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//默认不混淆变量名</span>
            compress<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">'/map/js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token method function property-access">dest</span><span class="token punctuation">(</span><span class="token string">'./publice/js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="%E4%BD%BF%E7%94%A8%E7%AE%A1%E9%81%93%E6%B5%81%E7%9B%91%E5%90%AC-error">使用管道流监听 error<a class="anchor" href="#%E4%BD%BF%E7%94%A8%E7%AE%A1%E9%81%93%E6%B5%81%E7%9B%91%E5%90%AC-error">§</a></h3>
<p>上面是我们使用gulp最平常不过的使用方法，但是这样做会有个缺点，那就是在压缩多个js过程中，一旦有一个js写错，就会终止任务，并且不知道出错的地方在哪里。
在gulp中文网上发现了这样一片文章<a href="http://www.gulpjs.com.cn/docs/recipes/combining-streams-to-handle-errors/">整合 streams 来处理错误</a>。gulp每一次pipe都会创建新的管道流，使用 stream-combiner2 可以将一系列的stream合并成一个，然后只用监听这一个stream抛出的错误就可以了。</p>
<p>只要稍微修改下前面的代码，就能愉快的监听gulp过程中产生的error了。</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    combiner <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stream-combiner2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sourcemaps <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-sourcemaps'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-uglify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token method function property-access">task</span><span class="token punctuation">(</span><span class="token string">'uglifyjs'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> batArr <span class="token operator">=</span> <span class="token punctuation">[</span>
        gulp<span class="token punctuation">.</span><span class="token method function property-access">src</span><span class="token punctuation">(</span><span class="token string">'./resource/js/**/*.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            mangle<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//默认不混淆变量名</span>
            compress<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">'/map/js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        gulp<span class="token punctuation">.</span><span class="token method function property-access">dest</span><span class="token punctuation">(</span><span class="token string">'./publice/js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> combiner <span class="token operator">=</span> combiner<span class="token punctuation">.</span><span class="token method function property-access">obj</span><span class="token punctuation">(</span>batArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    combined<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span>console<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> combined<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="%E6%8F%90%E9%AB%98watch%E7%9A%84%E6%95%88%E7%8E%87">提高watch的效率<a class="anchor" href="#%E6%8F%90%E9%AB%98watch%E7%9A%84%E6%95%88%E7%8E%87">§</a></h3>
<p>先看看watch最原始的写法：</p>
<pre class="language-javascript"><code class="language-javascript">gulp<span class="token punctuation">.</span><span class="token method function property-access">task</span><span class="token punctuation">(</span><span class="token string">'watchjs'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> gulp<span class="token punctuation">.</span><span class="token method function property-access">watch</span><span class="token punctuation">(</span><span class="token string">'./resource/js/**/*.js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> batArr <span class="token operator">=</span> <span class="token punctuation">[</span>
            gulp<span class="token punctuation">.</span><span class="token method function property-access">src</span><span class="token punctuation">(</span><span class="token string">'./resource/js/**/*.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                mangle<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//默认不混淆变量名</span>
                compress<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">'/map/js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            gulp<span class="token punctuation">.</span><span class="token method function property-access">dest</span><span class="token punctuation">(</span><span class="token string">'./publice/js'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> combiner <span class="token operator">=</span> combiner<span class="token punctuation">.</span><span class="token method function property-access">obj</span><span class="token punctuation">(</span>batArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        combined<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span>console<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span> combined<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>上面的这种方式可以达到监听js文件夹下所有的js的目的，并且在js文件发生变化后会自动执行回调函数。关键的问题在于，如果只是修改了一个js文件，这个函数还是会把所有的js都重新压缩一遍，这样的效率就很低了。</p>
<p>其实在watch方法的回调函数中，会传入一个event参数，该参数是一个对象，里面有当前修改的文件路径。有了这个参数，要做的就是把拼接出文件的源路径和输出路径就行，这里使用了一个插件（<a href="https://github.com/nimojs/gulp-watch-path">gulp-watch-path</a>）。</p>
<pre class="language-js"><code class="language-js">gulp<span class="token punctuation">.</span><span class="token method function property-access">task</span><span class="token punctuation">(</span><span class="token string">'watchjs'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> gulp<span class="token punctuation">.</span><span class="token method function property-access">watch</span><span class="token punctuation">(</span><span class="token string">'./resource/js/**/*.js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> paths <span class="token operator">=</span> <span class="token function">watchPath</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'./resource/'</span><span class="token punctuation">,</span> <span class="token string">'./public/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> batArr <span class="token operator">=</span> <span class="token punctuation">[</span>
            gulp<span class="token punctuation">.</span><span class="token method function property-access">src</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span><span class="token property-access">srcPath</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                mangle<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//默认不混淆变量名</span>
                compress<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            sourcemaps<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">'/map/js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            gulp<span class="token punctuation">.</span><span class="token method function property-access">dest</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span><span class="token property-access">distDir</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> combiner <span class="token operator">=</span> combiner<span class="token punctuation">.</span><span class="token method function property-access">obj</span><span class="token punctuation">(</span>batArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        combined<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span>console<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span> combined<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="%E5%BC%95%E5%85%A5gulp-util%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%9B%B4%E8%BD%BB%E6%9D%BE">引入gulp-util插件，配置更轻松<a class="anchor" href="#%E5%BC%95%E5%85%A5gulp-util%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%9B%B4%E8%BD%BB%E6%9D%BE">§</a></h3>
<p>这个插件有很多的作用，相当于是一个gulp的工具类。现在主要介绍在项目中用到的两个方法：env和log。</p>
<p>env方法可以获取到运行gulp命令时，跟在后面的参数。比如：</p>
<pre class="language-bash"><code class="language-bash">gulp --production
</code></pre>
<p>当运行上面的命令时，我们可以使用env方法获取到。</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> gutil <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>gutil<span class="token punctuation">.</span><span class="token method function property-access">env</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span>
</code></pre>
<p>log方法可以让控制台打印出带颜色的信息（听起来好像没什么卵用），可以更清晰得看到一些错误信息。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> colors <span class="token operator">=</span> gutil<span class="token punctuation">.</span><span class="token property-access">colors</span><span class="token punctuation">;</span>
gutil<span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span><span class="token method function property-access">red</span><span class="token punctuation">(</span><span class="token string">'Error!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在控制台打印出红色的Error。</span>
</code></pre>
<hr>
<p>完整的gulpfile.js文件请访问：<a href="https://github.com/Shenfq/gulpfile">GitHub</a></p></article></section><footer>Powered by <a href="https://github.com/xcatliu/pagic" target="_blank">Pagic</a></footer><script src="https://cdn.pagic.org/react@16.13.1/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@16.13.1/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>